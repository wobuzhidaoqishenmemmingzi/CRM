webpackJsonp([14],{"/2WM":function(t,e){},"/Oiz":function(t,e){},"2rLN":function(t,e){},"90Fk":function(t,e,n){var r={};function a(t){return n(i(t))}function i(t){var e=r[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(r)},a.resolve=i,t.exports=a,a.id="90Fk"},IcnI:function(t,e,n){"use strict";var r=n("7+uW"),a=n("NYxO"),i=n("lbHh"),o=n.n(i),s={state:{sidebar:{opened:!+o.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop"},mutations:{TOGGLE_SIDEBAR:function(t){t.sidebar.opened?o.a.set("sidebarStatus",1):o.a.set("sidebarStatus",0),t.sidebar.opened=!t.sidebar.opened},CLOSE_SIDEBAR:function(t,e){o.a.set("sidebarStatus",1),t.sidebar.opened=!1,t.sidebar.withoutAnimation=e},TOGGLE_DEVICE:function(t,e){t.device=e}},actions:{ToggleSideBar:function(t){(0,t.commit)("TOGGLE_SIDEBAR")},CloseSideBar:function(t,e){(0,t.commit)("CLOSE_SIDEBAR",e.withoutAnimation)},ToggleDevice:function(t,e){(0,t.commit)("TOGGLE_DEVICE",e)}}},c=n("//Fk"),u=n.n(c),l=n("M9A7"),d=n("TIfe"),m={state:{token:Object(d.a)(),name:"",avatar:"",roles:[]},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_NAME:function(t,e){t.name=e},SET_AVATAR:function(t,e){t.avatar=e},SET_ROLES:function(t,e){t.roles=e}},actions:{Login:function(t,e){var n=t.commit,r=e.username.trim();return new u.a(function(t,a){Object(l.g)(r,e.password).then(function(e){var r=e.data,a=r.tokenHead+r.token;Object(d.c)(a),n("SET_TOKEN",a),t()}).catch(function(t){a(t)})})},GetInfo:function(t){var e=t.commit;t.state;return new u.a(function(t,n){Object(l.e)().then(function(r){var a=r.data;a.roles&&a.roles.length>0?e("SET_ROLES",a.roles):n("getInfo: roles must be a non-null array !"),e("SET_NAME",a.username),e("SET_AVATAR",a.icon),t(r)}).catch(function(t){n(t)})})},LogOut:function(t){var e=t.commit,n=t.state;return new u.a(function(t,r){Object(l.h)(n.token).then(function(){e("SET_TOKEN",""),e("SET_ROLES",[]),Object(d.b)(),t()}).catch(function(t){r(t)})})},FedLogOut:function(t){var e=t.commit;return new u.a(function(t){e("SET_TOKEN",""),Object(d.b)(),t()})}}},h=n("YaEn");function p(t,e){if(e.name){var n=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t===r.name)return r}return null}(e.name,t);return null!=n?(null!=n.title&&""!==n.title&&(e.meta.title=n.title),null!=n.icon&&""!==n.title&&(e.meta.icon=n.icon),null!=n.hidden&&(e.hidden=0!==n.hidden),null!=n.sort&&""!==n.sort&&(e.sort=n.sort),!0):(e.sort=0,void 0!==e.hidden&&!0===e.hidden)}return!0}function f(t){return function(e,n){var r=e[t];return n[t]-r}}var v={state:{routers:h.b,addRouters:[]},mutations:{SET_ROUTERS:function(t,e){t.addRouters=e,t.routers=h.b.concat(e)}},actions:{GenerateRoutes:function(t,e){var n=t.commit;return new u.a(function(t){var r=e.menus,a=(e.username,h.a.filter(function(t){return!!p(r,t)&&(t.children&&t.children.length>0?(t.children=t.children.filter(function(t){return!!p(r,t)&&t}),t):t)}));!function(t){for(var e=0;e<t.length;e++){var n=t[e];n.children&&n.children.length>0&&n.children.sort(f("sort"))}t.sort(f("sort"))}(a),n("SET_ROUTERS",a),t()})}}},b={sidebar:function(t){return t.app.sidebar},device:function(t){return t.app.device},token:function(t){return t.user.token},avatar:function(t){return t.user.avatar},name:function(t){return t.user.name},roles:function(t){return t.user.roles},addRouters:function(t){return t.permission.addRouters},routers:function(t){return t.permission.routers}};r.default.use(a.a);var g=new a.a.Store({modules:{app:s,user:m,permission:v},getters:b});e.a=g},M9A7:function(t,e,n){"use strict";e.g=function(t,e){return Object(r.a)({url:"/admin/login",method:"post",data:{username:t,password:e}})},e.e=function(){return Object(r.a)({url:"/admin/info",method:"get"})},e.h=function(){return Object(r.a)({url:"/admin/logout",method:"post"})},e.d=function(t){return Object(r.a)({url:"/admin/list",method:"get",params:t})},e.b=function(t){return Object(r.a)({url:"/admin/register",method:"post",data:t})},e.i=function(t,e){return Object(r.a)({url:"/admin/update/"+t,method:"post",data:e})},e.j=function(t,e){return Object(r.a)({url:"/admin/updateStatus/"+t,method:"post",params:e})},e.c=function(t){return Object(r.a)({url:"/admin/delete/"+t,method:"post"})},e.f=function(t){return Object(r.a)({url:"/admin/role/"+t,method:"get"})},e.a=function(t){return Object(r.a)({url:"/admin/role/update",method:"post",data:t})};var r=n("vLgD")},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a=(n("uMhA"),n("zL8q")),i=n.n(a),o=(n("tvR6"),n("Vi3T")),s=n.n(o),c=n("vO7p"),u=n.n(c),l=(n("yh13"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var d=n("VU/8")({name:"App"},l,!1,function(t){n("dUW8")},null,null).exports,m=n("YaEn"),h=n("IcnI"),p={name:"svg-icon",props:{iconClass:{type:String,required:!0},className:{type:String}},computed:{iconName:function(){return"#icon-"+this.iconClass},svgClass:function(){return this.className?"svg-icon "+this.className:"svg-icon"}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{class:this.svgClass,attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":this.iconName}})])},staticRenderFns:[]};var v=n("VU/8")(p,f,!1,function(t){n("nyM3")},"data-v-13f5e9de",null).exports;r.default.component("svg-icon",v);var b,g=n("90Fk");(b=g).keys().map(b);var _=n("Dd8w"),w=n.n(_),E=n("Y81h"),O=n.n(E),S=(n("UVIz"),n("TIfe")),C=["/login"];m.c.beforeEach(function(t,e,n){O.a.start(),Object(S.a)()?"/login"===t.path?(n({path:"/"}),O.a.done()):0===h.a.getters.roles.length?h.a.dispatch("GetInfo").then(function(e){var r=e.data.menus,a=e.data.username;h.a.dispatch("GenerateRoutes",{menus:r,username:a}).then(function(){m.c.addRoutes(h.a.getters.addRouters),n(w()({},t,{replace:!0}))})}).catch(function(t){h.a.dispatch("FedLogOut").then(function(){a.Message.error(t||"Verification failed, please login again"),n({path:"/"})})}):n():-1!==C.indexOf(t.path)?n():(n("/login"),O.a.done())}),m.c.afterEach(function(){O.a.done()}),r.default.use(i.a,{locale:s.a}),r.default.use(u.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:m.c,store:h.a,components:{App:d},template:"<App/>"})},PpAb:function(t,e){},TIfe:function(t,e,n){"use strict";e.a=function(){return a.a.get(i)},e.c=function(t){return a.a.set(i,t)},e.b=function(){return a.a.remove(i)};var r=n("lbHh"),a=n.n(r),i="loginToken"},UVIz:function(t,e){},YaEn:function(t,e,n){"use strict";var r=n("7+uW"),a=n("/ocq"),i=n("Dd8w"),o=n.n(i),s=n("NYxO"),c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[n("transition-group",{attrs:{name:"breadcrumb"}},t._l(t.levelList,function(e,r){return e.meta.title?n("el-breadcrumb-item",{key:e.path},["noredirect"===e.redirect||r==t.levelList.length-1?n("span",{staticClass:"no-redirect"},[t._v(t._s(e.meta.title))]):n("router-link",{attrs:{to:e.redirect||e.path}},[t._v(t._s(e.meta.title))])],1):t._e()}),1)],1)},staticRenderFns:[]};var u=n("VU/8")({created:function(){this.getBreadcrumb()},data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},methods:{getBreadcrumb:function(){var t=this.$route.matched.filter(function(t){return t.name}),e=t[0];e&&"home"!==e.name&&(t=[{path:"/home",meta:{title:"首页"}}].concat(t)),this.levelList=t}}},c,!1,function(t){n("hXeH")},"data-v-8be9fc58",null).exports,l={name:"hamburger",props:{isActive:{type:Boolean,default:!1},toggleClick:{type:Function,default:null}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("svg",{staticClass:"hamburger",class:{"is-active":this.isActive},attrs:{t:"1492500959545",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1691","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},on:{click:this.toggleClick}},[e("path",{attrs:{d:"M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z","p-id":"1692"}}),this._v(" "),e("path",{attrs:{d:"M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z","p-id":"1693"}}),this._v(" "),e("path",{attrs:{d:"M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z","p-id":"1694"}})])])},staticRenderFns:[]};var m={components:{Breadcrumb:u,Hamburger:n("VU/8")(l,d,!1,function(t){n("2rLN")},"data-v-5d726924",null).exports},computed:o()({},Object(s.b)(["sidebar","avatar"])),methods:{toggleSideBar:function(){this.$store.dispatch("ToggleSideBar")},logout:function(){this.$store.dispatch("LogOut").then(function(){location.reload()})}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{staticClass:"navbar",attrs:{mode:"horizontal"}},[n("hamburger",{staticClass:"hamburger-container",attrs:{toggleClick:t.toggleSideBar,isActive:t.sidebar.opened}}),t._v(" "),n("breadcrumb"),t._v(" "),n("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[n("div",{staticClass:"avatar-wrapper"},[n("img",{staticClass:"user-avatar",attrs:{src:t.avatar}}),t._v(" "),n("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),n("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[n("router-link",{staticClass:"inlineBlock",attrs:{to:"/"}},[n("el-dropdown-item",[t._v("\n          首页\n        ")])],1),t._v(" "),n("el-dropdown-item",{attrs:{divided:""}},[n("span",{staticStyle:{display:"block"},on:{click:t.logout}},[t._v("退出")])])],1)],1)],1)},staticRenderFns:[]};var p=n("VU/8")(m,h,!1,function(t){n("/Oiz")},"data-v-0a637344",null).exports,f={name:"SidebarItem",props:{routes:{type:Array},isNest:{type:Boolean,default:!1}},methods:{hasOneShowingChildren:function(t){return 1===t.filter(function(t){return!t.hidden}).length}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu-wrapper"},[t._l(t.routes,function(e){return!e.hidden&&e.children?[!t.hasOneShowingChildren(e.children)||e.children[0].children||e.alwaysShow?n("el-submenu",{key:e.name,attrs:{index:e.name||e.path}},[n("template",{slot:"title"},[e.meta&&e.meta.icon?n("svg-icon",{attrs:{"icon-class":e.meta.icon}}):t._e(),t._v(" "),e.meta&&e.meta.title?n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.title))]):t._e()],1),t._v(" "),t._l(e.children,function(r){return r.hidden?t._e():[r.children&&r.children.length>0?n("sidebar-item",{key:r.path,staticClass:"nest-menu",attrs:{"is-nest":!0,routes:[r]}}):n("router-link",{key:r.name,attrs:{to:e.path+"/"+r.path}},[n("el-menu-item",{attrs:{index:e.path+"/"+r.path}},[r.meta&&r.meta.icon?n("svg-icon",{attrs:{"icon-class":r.meta.icon}}):t._e(),t._v(" "),r.meta&&r.meta.title?n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(r.meta.title))]):t._e()],1)],1)]})],2):n("router-link",{key:e.children[0].name,attrs:{to:e.path+"/"+e.children[0].path}},[n("el-menu-item",{class:{"submenu-title-noDropdown":!t.isNest},attrs:{index:e.path+"/"+e.children[0].path}},[e.children[0].meta&&e.children[0].meta.icon?n("svg-icon",{attrs:{"icon-class":e.children[0].meta.icon}}):t._e(),t._v(" "),e.children[0].meta&&e.children[0].meta.title?n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.children[0].meta.title))]):t._e()],1)],1)]:t._e()})],2)},staticRenderFns:[]},b={name:"scrollBar",data:function(){return{top:0}},methods:{handleScroll:function(t){var e=t.wheelDelta||3*-t.deltaY,n=this.$refs.scrollContainer.offsetHeight,r=this.$refs.scrollWrapper.offsetHeight;e>0?this.top=Math.min(0,this.top+e):n-15<r?this.top<-(r-n+15)?this.top=this.top:this.top=Math.max(this.top+e,n-r-15):this.top=0}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(e){return e.preventDefault(),t.handleScroll(e)}}},[n("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{top:t.top+"px"}},[t._t("default")],2)])},staticRenderFns:[]};var _={components:{SidebarItem:n("VU/8")(f,v,!1,null,null,null).exports,ScrollBar:n("VU/8")(b,g,!1,function(t){n("PpAb")},"data-v-272fceca",null).exports},computed:o()({},Object(s.b)(["sidebar","routers"]),{routes:function(){return this.routers},isCollapse:function(){return!this.sidebar.opened}})},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("scroll-bar",[e("el-menu",{attrs:{mode:"vertical","show-timeout":200,"default-active":this.$route.path,collapse:this.isCollapse,"background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"}},[e("sidebar-item",{attrs:{routes:this.routes}})],1)],1)},staticRenderFns:[]},E=n("VU/8")(_,w,!1,null,null,null).exports,O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"app-main"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)},staticRenderFns:[]},S=n("VU/8")({name:"AppMain",computed:{}},O,!1,null,null,null).exports,C=n("IcnI"),k=document.body,R={name:"layout",components:{Navbar:p,Sidebar:E,AppMain:S},mixins:[{watch:{$route:function(t){"mobile"===this.device&&this.sidebar.opened&&C.a.dispatch("CloseSideBar",{withoutAnimation:!1})}},beforeMount:function(){window.addEventListener("resize",this.resizeHandler)},mounted:function(){this.isMobile()&&(C.a.dispatch("ToggleDevice","mobile"),C.a.dispatch("CloseSideBar",{withoutAnimation:!0}))},methods:{isMobile:function(){return k.getBoundingClientRect().width-3<1024},resizeHandler:function(){if(!document.hidden){var t=this.isMobile();C.a.dispatch("ToggleDevice",t?"mobile":"desktop"),t&&C.a.dispatch("CloseSideBar",{withoutAnimation:!0})}}}}],computed:{sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device},classObj:function(){return{hideSidebar:!this.sidebar.opened,withoutAnimation:this.sidebar.withoutAnimation,mobile:"mobile"===this.device}}}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-wrapper",class:this.classObj},[e("sidebar",{staticClass:"sidebar-container"}),this._v(" "),e("div",{staticClass:"main-container"},[e("navbar"),this._v(" "),e("app-main")],1)],1)},staticRenderFns:[]};var A=n("VU/8")(R,T,!1,function(t){n("/2WM")},"data-v-09e7b367",null).exports;n.d(e,"b",function(){return y}),n.d(e,"a",function(){return M}),r.default.use(a.a);var y=[{path:"/login",component:function(){return n.e(7).then(n.bind(null,"T+/8"))},hidden:!0},{path:"/404",component:function(){return n.e(6).then(n.bind(null,"+H76"))},hidden:!0},{path:"",component:A,redirect:"/home",children:[{path:"home",name:"home",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"KR8f"))},meta:{title:"首页",icon:"home"}}]}],M=[{path:"/ums",component:A,redirect:"/ums/admin",name:"ums",meta:{title:"权限",icon:"ums"},children:[{path:"admin",name:"admin",component:function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,"dIFQ"))},meta:{title:"用户列表",icon:"ums-admin"}},{path:"role",name:"role",component:function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"nrOE"))},meta:{title:"角色列表",icon:"ums-role"}},{path:"allocMenu",name:"allocMenu",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"lfyr"))},meta:{title:"分配菜单"},hidden:!0},{path:"allocResource",name:"allocResource",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"4hVX"))},meta:{title:"分配资源"},hidden:!0},{path:"menu",name:"menu",component:function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,"6gsm"))},meta:{title:"菜单列表",icon:"ums-menu"}},{path:"addMenu",name:"addMenu",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"vbR0"))},meta:{title:"添加菜单"},hidden:!0},{path:"updateMenu",name:"updateMenu",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"b5Re"))},meta:{title:"修改菜单"},hidden:!0},{path:"resource",name:"resource",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"L1/C"))},meta:{title:"资源列表",icon:"ums-resource"}},{path:"resourceCategory",name:"resourceCategory",component:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,"mlS1"))},meta:{title:"资源分类"},hidden:!0}]},{path:"*",redirect:"/404",hidden:!0}];e.c=new a.a({scrollBehavior:function(){return{y:0}},routes:y})},dUW8:function(t,e){},hXeH:function(t,e){},nyM3:function(t,e){},tvR6:function(t,e){},uMhA:function(t,e){},vLgD:function(t,e,n){"use strict";var r=n("//Fk"),a=n.n(r),i=n("mtWM"),o=n.n(i),s=n("zL8q"),c=(n.n(s),n("IcnI")),u=n("TIfe"),l=o.a.create({baseURL:"http://localhost:8088",timeout:15e3});l.interceptors.request.use(function(t){return c.a.getters.token&&(t.headers.Authorization=Object(u.a)()),t},function(t){console.log(t),a.a.reject(t)}),l.interceptors.response.use(function(t){var e=t.data;return 200!==e.code?(Object(s.Message)({message:e.message,type:"error",duration:3e3}),401===e.code&&s.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){c.a.dispatch("FedLogOut").then(function(){location.reload()})}),a.a.reject("error")):t.data},function(t){return console.log("err"+t),Object(s.Message)({message:t.message,type:"error",duration:3e3}),a.a.reject(t)}),e.a=l},yh13:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.53e0eadc4a4208a6af75.js.map